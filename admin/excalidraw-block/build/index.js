(()=>{"use strict";var e,t={233:(e,t,l)=>{const n=window.React,a=window.wp.blocks,c=window.wp.i18n,r=window.wp.blockEditor,o=window.wp.components,i=window.wp.primitives,s=(0,n.createElement)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,n.createElement)(i.Path,{d:"m11.3 17.2-5-5c-.1-.1-.1-.3 0-.4l2.3-2.3-1.1-1-2.3 2.3c-.7.7-.7 1.8 0 2.5l5 5H7.5v1.5h5.3v-5.2h-1.5v2.6zm7.5-6.4-5-5h2.7V4.2h-5.2v5.2h1.5V6.8l5 5c.1.1.1.3 0 .4l-2.3 2.3 1.1 1.1 2.3-2.3c.6-.7.6-1.9-.1-2.5z"})),d=(0,n.createElement)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,n.createElement)(i.Path,{d:"m19 7-3-3-8.5 8.5-1 4 4-1L19 7Zm-7 11.5H5V20h7v-1.5Z"})),m=(0,n.createElement)(i.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,n.createElement)(i.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M12.848 8a1 1 0 0 1-.914-.594l-.723-1.63a.5.5 0 0 0-.447-.276H5a.5.5 0 0 0-.5.5v11.5a.5.5 0 0 0 .5.5h14a.5.5 0 0 0 .5-.5v-9A.5.5 0 0 0 19 8h-6.152Zm.612-1.5a.5.5 0 0 1-.462-.31l-.445-1.084A2 2 0 0 0 10.763 4H5a2 2 0 0 0-2 2v11.5a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-9a2 2 0 0 0-2-2h-5.54Z"}));function w({onSelect:e}){return(0,n.createElement)("div",{className:"selector"},(0,n.createElement)("div",{className:"message"},(0,c.__)("Please select an Excalidraw drawing","excalidraw-block")),(0,n.createElement)("div",{className:"action"},(0,n.createElement)(o.Button,{variant:"primary",onClick:e},(0,c.__)("Select document","excalidraw-block")),(0,n.createElement)(o.Button,{variant:"secondary",onClick:()=>{window.open(window.EXCALIDRAW_BLOCK_DATA.newDocUrl,"_blank")}},(0,c.__)("Create new drawing","excalidraw-block"))))}function u({doc:e,showTitle:t,width:l,onSetWidth:a,resizeControls:c,alignment:r}){const i=(0,n.useRef)(),s=()=>(0,n.createElement)("div",{className:"content",dangerouslySetInnerHTML:{__html:e.full}});return(0,n.createElement)("div",{className:"doc-container"},(0,n.createElement)("div",{className:"doc",ref:i,style:{justifyContent:r}},c?(0,n.createElement)(o.ResizableBox,{minWidth:"20%",maxWidth:"100%",lockAspectRatio:!0,onResizeStop:(e,t,l,n)=>{if(i.current){const e=l.offsetWidth/i.current.offsetWidth*100;a(e)}},size:{width:l+"%"}},(0,n.createElement)(s,null)):(0,n.createElement)("div",{style:{width:l+"%"}},(0,n.createElement)(s,null))),t&&(0,n.createElement)("div",{className:"title"},e.title))}const h=window.wp.apiFetch;var E=l.n(h);function p({doc:e,onSelect:t,isSelected:l}){return(0,n.createElement)("a",{className:"thumbnail"+(l?" current-thumbnail":""),href:"#",onClick:()=>t()},(0,n.createElement)("div",{className:"image"},(0,n.createElement)("img",{src:e.thumbnail})),(0,n.createElement)("div",{className:"title"},e.title))}function v({onSelect:e,onClose:t,currentDocId:l}){const[a,r]=(0,n.useState)(!1),[i,s]=(0,n.useState)([]),d="undefined"==typeof AbortController?void 0:new AbortController;return(0,n.useEffect)((()=>(r(!0),(async()=>{try{const e=await E()({path:"/wp/v1/excalidraw/docs",signal:d?.signal,parse:!0}),t=JSON.parse(e);s(t)}catch(e){"AbortError"!==e.name&&console.error(e)}r(!1)})(),()=>{d.abort()})),[]),(0,n.createElement)("div",{className:"excalidraw-block-gallery"},a?(0,n.createElement)("div",{className:"spinner-container"},(0,n.createElement)(o.Spinner,{style:{height:"calc(4px * 10)",width:"calc(4px * 10)"}})):i.length>0?(0,n.createElement)("div",{className:"gallery-grid"},i.map((t=>(0,n.createElement)(p,{doc:t,onSelect:()=>e(t),isSelected:l===t.uuid})))):(0,n.createElement)("div",{className:"not-found"},(0,n.createElement)("div",null,(0,c.__)("Do Excalidraw documents found!","excalidraw-block")),(0,n.createElement)("a",{href:window.EXCALIDRAW_BLOCK_DATA.newDocUrl,target:"_blank",onClick:()=>t()},(0,c.__)("Create new drawing","excalidraw-block"))))}const b=JSON.parse('{"UU":"excalidraw/excalidraw-block"}');(0,a.registerBlockType)(b.UU,{edit:function({attributes:e,setAttributes:t,isSelected:l}){const{docId:a,showTitle:i,width:h,alignment:p}=e,[b,k]=(0,n.useState)(!0),[f,g]=(0,n.useState)(null),[x,_]=(0,n.useState)(!1),C=(0,n.useRef)(!1),S=()=>{_(!0)},y="undefined"==typeof AbortController?void 0:new AbortController,A=(e=!1)=>{a&&(e||k(!0),(async()=>{try{const e=await E()({path:"/wp/v1/excalidraw/docs/"+a,signal:y?.signal}),t=JSON.parse(e);g(t)}catch(e){"AbortError"!==e.name&&console.error(e)}k(!1)})())};return(0,n.useEffect)((()=>{A();const e=()=>{document.hidden||C.current&&A(!0)};return document.addEventListener("visibilitychange",e),()=>{y.abort(),document.removeEventListener("visibilitychange",e)}}),[a]),(0,n.useEffect)((()=>{C.current=l}),[l]),(0,n.createElement)("div",{...(0,r.useBlockProps)()},(0,n.createElement)(r.InspectorControls,null,(0,n.createElement)(o.PanelBody,{title:(0,c.__)("Document","excalidraw-block")},(0,n.createElement)(o.ToggleControl,{label:(0,c.__)("Show Title","excalidraw-block"),checked:i,onChange:e=>t({showTitle:e})}))),(0,n.createElement)(r.BlockControls,null,void 0!==a&&(0,n.createElement)(n.Fragment,null,(0,n.createElement)(o.ToolbarGroup,null,(0,n.createElement)(r.AlignmentToolbar,{value:p,onChange:e=>t({alignment:e})})),(0,n.createElement)(o.ToolbarGroup,null,(0,n.createElement)(o.Toolbar,{label:(0,c.__)("Document","excalidraw-block")},(0,n.createElement)(o.ToolbarButton,{icon:s,label:(0,c.__)("Reload","excalidraw-block"),onClick:()=>{A()}},(0,c.__)("Reload","excalidraw-block"))),(0,n.createElement)(o.Toolbar,null,(0,n.createElement)(o.ToolbarButton,{icon:d,label:(0,c.__)("Edit","excalidraw-block"),onClick:()=>{window.open(window.EXCALIDRAW_BLOCK_DATA.editDocUrl+a,"_blank").focus()}},(0,c.__)("Edit","excalidraw-block"))))),(0,n.createElement)(o.ToolbarGroup,null,(0,n.createElement)(o.Toolbar,null,(0,n.createElement)(o.ToolbarButton,{label:(0,c.__)("Replace","excalidraw-block"),onClick:S,icon:m},a?(0,c.__)("Replace","excalidraw-block"):(0,c.__)("Select","excalidraw-block"))))),x&&(0,n.createElement)(o.Modal,{onRequestClose:()=>_(!1)},(0,n.createElement)(v,{onSelect:e=>{t({docId:e.uuid}),_(!1)},onClose:()=>_(!1),currentDocId:a})),a?b?(0,n.createElement)("div",{className:"spinner-container"},(0,n.createElement)(o.Spinner,{style:{height:"calc(4px * 10)",width:"calc(4px * 10)"}})):(0,n.createElement)(u,{doc:f,resizeControls:l,showTitle:i,width:h,alignment:p,onSetWidth:e=>t({width:Math.round(e)})}):(0,n.createElement)(w,{onSelect:S}))},icon:{src:(0,n.createElement)("svg",{"clip-rule":"evenodd","fill-rule":"evenodd","stroke-linecap":"round",version:"1.1",viewBox:"0 0 75 74",xmlns:"http://www.w3.org/2000/svg"},(0,n.createElement)("path",{d:"m3.756 58.856 13.867 12.64 50.085-46.561 4.279-22.323-24.126 3.549-44.591 51.876 0.486 0.819zm52.647-43.748c2.298 0 4.164 1.866 4.164 4.165 0 2.298-1.866 4.164-4.164 4.164-2.299 0-4.165-1.866-4.165-4.164-0-2.299 1.866-4.165 4.165-4.165z",fill:"#000"}),(0,n.createElement)("path",{d:"m3.176 57.472c2.92 2.81 6.001 6.547 13.075 13.205m-12.935-12.25c3.897 3.052 8.669 7.179 14.145 12.297m-0.776 0.371c13.358-11.79 26.164-24.118 49.751-45.772m-49.357 45.606c11.592-10.598 21.97-20.751 50.042-45.58m0.675-0.201c0.949-5.689 1.655-12.187 2.979-22.992m-3.984 23.152c1.473-7.822 3.449-15.539 4.07-22.239m0.013-0.011c-4.792 0.298-11.344 1.43-23.397 3.968m23.897-3.78c-7.55-0.044-15.685 1.727-23.779 3.155m-0.325-0.746c-15.752 19.564-30.728 37.783-44.256 52.155m44.719-51.368c-14.997 17.445-29.276 34.148-43.971 51.944",fill:"none",stroke:"#000","stroke-width":".22px"}),(0,n.createElement)("g",{fill:"#000",stroke:"#000"},(0,n.createElement)("path",{d:"m58.282 41.238-14.46 14.154 18.091 16.164 9.824-11.732-14.743-18.077","stroke-linecap":"butt","stroke-linejoin":"round","stroke-miterlimit":"2","stroke-width":".11px"}),(0,n.createElement)("path",{d:"m57.294 41.281c-4.195 4.553-8.959 8.092-13.695 13.294m13.542-12.936c-4.816 5.353-9.916 10.313-13.802 13.127m0.375 0.703c6.17 3.969 11.352 9.94 18.081 14.78m-17.894-15.459c5.886 4.971 13.093 11.234 18.446 15.672m0.41 0.652c2.842-4.553 6.027-8.868 10.086-11.359m-10.597 11.318c3.493-3.298 5.87-6.833 9.875-11.029m0.709-0.742c-5.646-5.577-10.308-10.553-15.094-18.142m14.861 18.295c-3.744-2.866-6.601-6.811-14.831-17.859","stroke-width":".22px"})),(0,n.createElement)("g",{fill:"#000",stroke:"#000"},(0,n.createElement)("path",{d:"m33.56 17.503-13.503 16.464-11.844-8.76-5.903-22.082 19.397 5.016 10.265 8.722","stroke-linecap":"butt","stroke-linejoin":"round","stroke-miterlimit":"2","stroke-width":".11px"}),(0,n.createElement)("path",{d:"m32.6 17.952c-3.755 3.271-5.918 6.741-12.588 15.888m12.989-16.201c-5.144 6.108-10.764 12.174-13.537 16.408m0.207-0.153c-5.247-2.431-9.414-6.662-11.266-8.551m10.578 8.611c-3.86-2.773-8.594-6.951-10.755-8.236m-0.416-0.811c-2.099-7.134-2.791-13.177-5.213-22.004m5.584 22.718c-2.222-7.852-3.951-15.454-5.454-22.621m-0.572-2e-3c6.509 2.603 13.056 2.424 19.52 4.798m-19.404-4.276c7.605 1.807 15.161 2.933 20.534 3.811m0.155 0.724c0.789 1.066 3.888 2.931 10.382 9.875m-10.568-10.414c3.781 3.977 7.43 7.19 10.382 9.808","stroke-width":".22px"})))}})}},l={};function n(e){var a=l[e];if(void 0!==a)return a.exports;var c=l[e]={exports:{}};return t[e](c,c.exports,n),c.exports}n.m=t,e=[],n.O=(t,l,a,c)=>{if(!l){var r=1/0;for(d=0;d<e.length;d++){for(var[l,a,c]=e[d],o=!0,i=0;i<l.length;i++)(!1&c||r>=c)&&Object.keys(n.O).every((e=>n.O[e](l[i])))?l.splice(i--,1):(o=!1,c<r&&(r=c));if(o){e.splice(d--,1);var s=a();void 0!==s&&(t=s)}}return t}c=c||0;for(var d=e.length;d>0&&e[d-1][2]>c;d--)e[d]=e[d-1];e[d]=[l,a,c]},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var l in t)n.o(t,l)&&!n.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={57:0,350:0};n.O.j=t=>0===e[t];var t=(t,l)=>{var a,c,[r,o,i]=l,s=0;if(r.some((t=>0!==e[t]))){for(a in o)n.o(o,a)&&(n.m[a]=o[a]);if(i)var d=i(n)}for(t&&t(l);s<r.length;s++)c=r[s],n.o(e,c)&&e[c]&&e[c][0](),e[c]=0;return n.O(d)},l=globalThis.webpackChunkexcalidraw_block=globalThis.webpackChunkexcalidraw_block||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))})();var a=n.O(void 0,[350],(()=>n(233)));a=n.O(a)})();